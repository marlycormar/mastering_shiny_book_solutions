<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Functions | Mastering Shiny Solutions</title>
  <meta name="description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Functions | Mastering Shiny Solutions" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="github-repo" content="marlycormar/mastering_shiny_book_solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Functions | Mastering Shiny Solutions" />
  
  <meta name="twitter:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  

<meta name="author" content="Maya Gans and Marly Gotti" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="general-guidelines.html"/>
<link rel="next" href="modules.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102068953-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102068953-3');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mastering Shiny Solutions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-boxes"><i class="fa fa-check"></i>Note Boxes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html"><i class="fa fa-check"></i><b>2</b> Your First Shiny App</a><ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.1"><i class="fa fa-check"></i>Exercise 2.8.1</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.2"><i class="fa fa-check"></i>Exercise 2.8.2</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.3"><i class="fa fa-check"></i>Exercise 2.8.3</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.4"><i class="fa fa-check"></i>Exercise 2.8.4</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.5"><i class="fa fa-check"></i>Exercise 2.8.5</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-ui.html"><a href="basic-ui.html"><i class="fa fa-check"></i><b>3</b> Basic UI</a><ul>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.1"><i class="fa fa-check"></i>Exercise 3.2.8.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.2"><i class="fa fa-check"></i>Exercise 3.2.8.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.3"><i class="fa fa-check"></i>Exercise 3.2.8.3</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.4"><i class="fa fa-check"></i>Exercise 3.2.8.4</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.5"><i class="fa fa-check"></i>Exercise 3.2.8.5</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.1"><i class="fa fa-check"></i>Exercise 3.3.5.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.2"><i class="fa fa-check"></i>Exercise 3.3.5.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.1"><i class="fa fa-check"></i>Exercise 3.4.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.2"><i class="fa fa-check"></i>Exercise 3.4.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.3"><i class="fa fa-check"></i>Exercise 3.4.6.3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-reactivity.html"><a href="basic-reactivity.html"><i class="fa fa-check"></i><b>4</b> Basic Reactivity</a><ul>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.1"><i class="fa fa-check"></i>Exercise 4.3.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.2"><i class="fa fa-check"></i>Exercise 4.3.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.4.6.1"><i class="fa fa-check"></i>Exercise 4.4.6.1</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html"><i class="fa fa-check"></i><b>5</b> Case Study: ER Injuries</a><ul>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.1"><i class="fa fa-check"></i>Exercise 5.8.1</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.2"><i class="fa fa-check"></i>Exercise 5.8.2</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.3"><i class="fa fa-check"></i>Exercise 5.8.3</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.4"><i class="fa fa-check"></i>Exercise 5.8.4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>6</b> Workflow</a></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a><ul>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.1"><i class="fa fa-check"></i>Exercise 7.6.1</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.2"><i class="fa fa-check"></i>Exercise 7.6.2</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.3"><i class="fa fa-check"></i>Exercise 7.6.3</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="user-feedback.html"><a href="user-feedback.html"><i class="fa fa-check"></i><b>8</b> User Feedback</a></li>
<li class="chapter" data-level="9" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html"><i class="fa fa-check"></i><b>9</b> Uploads and Downloads</a><ul>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.1"><i class="fa fa-check"></i>Exercise 9.4.1</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.2"><i class="fa fa-check"></i>Exercise 9.4.2</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.3"><i class="fa fa-check"></i>Exercise 9.4.3</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.4"><i class="fa fa-check"></i>Exercise 9.4.4</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-ui.html"><a href="dynamic-ui.html"><i class="fa fa-check"></i><b>10</b> Dynamic UI</a><ul>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.1"><i class="fa fa-check"></i>Exercise 10.1.5.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.2"><i class="fa fa-check"></i>Exercise 10.1.5.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.3"><i class="fa fa-check"></i>Exercise 10.1.5.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.4"><i class="fa fa-check"></i>Exercise 10.1.5.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.5"><i class="fa fa-check"></i>Exercise 10.1.5.5</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.1"><i class="fa fa-check"></i>Exercise 10.2.3.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.2"><i class="fa fa-check"></i>Exercise 10.2.3.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.3"><i class="fa fa-check"></i>Exercise 10.2.3.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.1"><i class="fa fa-check"></i>Exercise 10.3.4.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.2"><i class="fa fa-check"></i>Exercise 10.3.4.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.3"><i class="fa fa-check"></i>Exercise 10.3.4.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.4"><i class="fa fa-check"></i>Exercise 10.3.4.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.5"><i class="fa fa-check"></i>Exercise 10.3.4.5</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="bookmarking.html"><a href="bookmarking.html"><i class="fa fa-check"></i><b>11</b> Bookmarking</a><ul>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-evaluation.html"><a href="tidy-evaluation.html"><i class="fa fa-check"></i><b>12</b> Tidy Evaluation</a></li>
<li class="chapter" data-level="13" data-path="general-guidelines.html"><a href="general-guidelines.html"><i class="fa fa-check"></i><b>13</b> General Guidelines</a></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.1"><i class="fa fa-check"></i>Exercise 14.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.2"><i class="fa fa-check"></i>Exercise 14.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.3"><i class="fa fa-check"></i>Exercise 14.4.3</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>15</b> Modules</a><ul>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.1"><i class="fa fa-check"></i>Exercise 15.6.1</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.2"><i class="fa fa-check"></i>Exercise 15.6.2</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.3"><i class="fa fa-check"></i>Exercise 15.6.3</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.4"><i class="fa fa-check"></i>Exercise 15.6.4</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.5"><i class="fa fa-check"></i>Exercise 15.6.5</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.6"><i class="fa fa-check"></i>Exercise 15.6.6</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>16</b> Packages</a></li>
<li class="chapter" data-level="17" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>17</b> Testing</a></li>
<li class="chapter" data-level="18" data-path="safety.html"><a href="safety.html"><i class="fa fa-check"></i><b>18</b> Safety</a></li>
<li class="chapter" data-level="19" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>19</b> Performance</a></li>
<li class="chapter" data-level="20" data-path="why-reactivity.html"><a href="why-reactivity.html"><i class="fa fa-check"></i><b>20</b> Why reactivity?</a></li>
<li class="chapter" data-level="21" data-path="dependency-tracking.html"><a href="dependency-tracking.html"><i class="fa fa-check"></i><b>21</b> Dependency Tracking</a></li>
<li class="chapter" data-level="22" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>22</b> Scoping</a></li>
<li class="chapter" data-level="23" data-path="reactive-components.html"><a href="reactive-components.html"><i class="fa fa-check"></i><b>23</b> Reactive Components</a></li>
<li class="chapter" data-level="24" data-path="advanced-ui.html"><a href="advanced-ui.html"><i class="fa fa-check"></i><b>24</b> Advanced UI</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering Shiny Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Functions</h1>
<div class="TODO">
This chapter is in development...
</div>
<div id="exercise-14.4.1" class="section level3 unnumbered">
<h3>Exercise 14.4.1</h3>
<p>The following app plots user selected variables from the msleep dataset for three different types of mammals (carnivores, omnivores, and herbivores), with one tab for each type of mammal. Remove the redundancy in the <code>selectInput()</code> definitions with the use of functions.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb55-2" data-line-number="2"></a>
<a class="sourceLine" id="cb55-3" data-line-number="3">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb55-4" data-line-number="4">  <span class="kw">selectInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;x&quot;</span>,</a>
<a class="sourceLine" id="cb55-5" data-line-number="5">              <span class="dt">label =</span> <span class="st">&quot;X-axis:&quot;</span>,</a>
<a class="sourceLine" id="cb55-6" data-line-number="6">              <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>, </a>
<a class="sourceLine" id="cb55-7" data-line-number="7">                          <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</a>
<a class="sourceLine" id="cb55-8" data-line-number="8">              <span class="dt">selected =</span> <span class="st">&quot;sleep_rem&quot;</span>),</a>
<a class="sourceLine" id="cb55-9" data-line-number="9">  <span class="kw">selectInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;y&quot;</span>,</a>
<a class="sourceLine" id="cb55-10" data-line-number="10">              <span class="dt">label =</span> <span class="st">&quot;Y-axis:&quot;</span>,</a>
<a class="sourceLine" id="cb55-11" data-line-number="11">              <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>, </a>
<a class="sourceLine" id="cb55-12" data-line-number="12">                          <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</a>
<a class="sourceLine" id="cb55-13" data-line-number="13">              <span class="dt">selected =</span> <span class="st">&quot;sleep_total&quot;</span>),</a>
<a class="sourceLine" id="cb55-14" data-line-number="14">  <span class="kw">tabsetPanel</span>(<span class="dt">id =</span> <span class="st">&quot;vore&quot;</span>,</a>
<a class="sourceLine" id="cb55-15" data-line-number="15">              <span class="kw">tabPanel</span>(<span class="st">&quot;Carnivore&quot;</span>,</a>
<a class="sourceLine" id="cb55-16" data-line-number="16">                       <span class="kw">plotOutput</span>(<span class="st">&quot;plot_carni&quot;</span>)),</a>
<a class="sourceLine" id="cb55-17" data-line-number="17">              <span class="kw">tabPanel</span>(<span class="st">&quot;Omnivore&quot;</span>,</a>
<a class="sourceLine" id="cb55-18" data-line-number="18">                       <span class="kw">plotOutput</span>(<span class="st">&quot;plot_omni&quot;</span>)),</a>
<a class="sourceLine" id="cb55-19" data-line-number="19">              <span class="kw">tabPanel</span>(<span class="st">&quot;Herbivore&quot;</span>,</a>
<a class="sourceLine" id="cb55-20" data-line-number="20">                       <span class="kw">plotOutput</span>(<span class="st">&quot;plot_herbi&quot;</span>)))</a>
<a class="sourceLine" id="cb55-21" data-line-number="21">)</a>
<a class="sourceLine" id="cb55-22" data-line-number="22"></a>
<a class="sourceLine" id="cb55-23" data-line-number="23">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb55-24" data-line-number="24"></a>
<a class="sourceLine" id="cb55-25" data-line-number="25">  <span class="co"># make subsets</span></a>
<a class="sourceLine" id="cb55-26" data-line-number="26">  carni &lt;-<span class="st"> </span><span class="kw">reactive</span>( <span class="kw">filter</span>(msleep, vore <span class="op">==</span><span class="st"> &quot;carni&quot;</span>) )</a>
<a class="sourceLine" id="cb55-27" data-line-number="27">  omni  &lt;-<span class="st"> </span><span class="kw">reactive</span>( <span class="kw">filter</span>(msleep, vore <span class="op">==</span><span class="st"> &quot;omni&quot;</span>)  )</a>
<a class="sourceLine" id="cb55-28" data-line-number="28">  herbi &lt;-<span class="st"> </span><span class="kw">reactive</span>( <span class="kw">filter</span>(msleep, vore <span class="op">==</span><span class="st"> &quot;herbi&quot;</span>) )</a>
<a class="sourceLine" id="cb55-29" data-line-number="29"></a>
<a class="sourceLine" id="cb55-30" data-line-number="30">  <span class="co"># make plots</span></a>
<a class="sourceLine" id="cb55-31" data-line-number="31">  output<span class="op">$</span>plot_carni &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb55-32" data-line-number="32">    <span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">carni</span>(), <span class="kw">aes_string</span>(<span class="dt">x =</span> input<span class="op">$</span>x, <span class="dt">y =</span> input<span class="op">$</span>y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb55-33" data-line-number="33"><span class="st">      </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb55-34" data-line-number="34">  }, <span class="dt">res =</span> <span class="dv">96</span>)</a>
<a class="sourceLine" id="cb55-35" data-line-number="35">  output<span class="op">$</span>plot_omni &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb55-36" data-line-number="36">    <span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">omni</span>(), <span class="kw">aes_string</span>(<span class="dt">x =</span> input<span class="op">$</span>x, <span class="dt">y =</span> input<span class="op">$</span>y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb55-37" data-line-number="37"><span class="st">      </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb55-38" data-line-number="38">  }, <span class="dt">res =</span> <span class="dv">96</span>)</a>
<a class="sourceLine" id="cb55-39" data-line-number="39">  output<span class="op">$</span>plot_herbi &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb55-40" data-line-number="40">    <span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">herbi</span>(), <span class="kw">aes_string</span>(<span class="dt">x =</span> input<span class="op">$</span>x, <span class="dt">y =</span> input<span class="op">$</span>y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb55-41" data-line-number="41"><span class="st">      </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb55-42" data-line-number="42">  }, <span class="dt">res =</span> <span class="dv">96</span>)</a>
<a class="sourceLine" id="cb55-43" data-line-number="43"></a>
<a class="sourceLine" id="cb55-44" data-line-number="44">}</a>
<a class="sourceLine" id="cb55-45" data-line-number="45"></a>
<a class="sourceLine" id="cb55-46" data-line-number="46"><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
<div class="solution">
<h4 id="solution-40" class="unnumbered"><span id="unlabeled-div-41" class="solution"><em>Solution</em>. </span>Solution</h4>
<p>We can see a pattern here where we are creating the same type of plot for each tabset panel, with the only variable changing being the <code>vore</code> argument. We can reduce everything we see in triplicate to functions! We can use <code>map</code> to create a single <code>create_panels</code> function which will create a tab for each of our <code>species</code>. On the server side, the data is filtered three times, and the plots are created three times. We can create a single rendering function that given the correct string it will filter the data, create the correct plot, and assign it to the correct output.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb56-2" data-line-number="2"></a>
<a class="sourceLine" id="cb56-3" data-line-number="3"><span class="co"># use a vector for function inputs</span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4">species &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Carnivore&quot;</span>, <span class="st">&quot;Omnivore&quot;</span>, <span class="st">&quot;Herbivore&quot;</span>)</a>
<a class="sourceLine" id="cb56-5" data-line-number="5"></a>
<a class="sourceLine" id="cb56-6" data-line-number="6"><span class="co"># educe to a single UI function</span></a>
<a class="sourceLine" id="cb56-7" data-line-number="7"><span class="co"># Marly: this didn&#39;t work!</span></a>
<a class="sourceLine" id="cb56-8" data-line-number="8">create_panels &lt;-<span class="st"> </span><span class="cf">function</span>(id) {</a>
<a class="sourceLine" id="cb56-9" data-line-number="9">    <span class="kw">tabPanel</span>(id, <span class="kw">plotOutput</span>(<span class="kw">paste0</span>(<span class="st">&quot;plot_&quot;</span>, id)))</a>
<a class="sourceLine" id="cb56-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb56-11" data-line-number="11"></a>
<a class="sourceLine" id="cb56-12" data-line-number="12">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb56-13" data-line-number="13">    <span class="kw">selectInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;x&quot;</span>,</a>
<a class="sourceLine" id="cb56-14" data-line-number="14">                <span class="dt">label =</span> <span class="st">&quot;X-axis:&quot;</span>,</a>
<a class="sourceLine" id="cb56-15" data-line-number="15">                <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>,</a>
<a class="sourceLine" id="cb56-16" data-line-number="16">                            <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</a>
<a class="sourceLine" id="cb56-17" data-line-number="17">                <span class="dt">selected =</span> <span class="st">&quot;sleep_rem&quot;</span>),</a>
<a class="sourceLine" id="cb56-18" data-line-number="18">    <span class="kw">selectInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;y&quot;</span>,</a>
<a class="sourceLine" id="cb56-19" data-line-number="19">                <span class="dt">label =</span> <span class="st">&quot;Y-axis:&quot;</span>,</a>
<a class="sourceLine" id="cb56-20" data-line-number="20">                <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;sleep_total&quot;</span>, <span class="st">&quot;sleep_rem&quot;</span>, <span class="st">&quot;sleep_cycle&quot;</span>,</a>
<a class="sourceLine" id="cb56-21" data-line-number="21">                            <span class="st">&quot;awake&quot;</span>, <span class="st">&quot;brainwt&quot;</span>, <span class="st">&quot;bodywt&quot;</span>),</a>
<a class="sourceLine" id="cb56-22" data-line-number="22">                <span class="dt">selected =</span> <span class="st">&quot;sleep_total&quot;</span>),</a>
<a class="sourceLine" id="cb56-23" data-line-number="23">    <span class="kw">tabsetPanel</span>(</a>
<a class="sourceLine" id="cb56-24" data-line-number="24">        <span class="kw">tabPanel</span>(<span class="st">&quot;Carnivore&quot;</span>, <span class="kw">plotOutput</span>(<span class="st">&quot;plot_Carnivore&quot;</span>)),</a>
<a class="sourceLine" id="cb56-25" data-line-number="25">        <span class="kw">tabPanel</span>(<span class="st">&quot;Omnivore&quot;</span>, <span class="kw">plotOutput</span>(<span class="st">&quot;plot_Omnivore&quot;</span>)),</a>
<a class="sourceLine" id="cb56-26" data-line-number="26">        <span class="kw">tabPanel</span>(<span class="st">&quot;Herbivore&quot;</span>, <span class="kw">plotOutput</span>(<span class="st">&quot;plot_Herbivore&quot;</span>))</a>
<a class="sourceLine" id="cb56-27" data-line-number="27">    )</a>
<a class="sourceLine" id="cb56-28" data-line-number="28">    <span class="co"># this works without the tabsetPanel function - why?!</span></a>
<a class="sourceLine" id="cb56-29" data-line-number="29">    <span class="co"># purrr::map(species, create_panels)</span></a>
<a class="sourceLine" id="cb56-30" data-line-number="30">)</a>
<a class="sourceLine" id="cb56-31" data-line-number="31"></a>
<a class="sourceLine" id="cb56-32" data-line-number="32">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb56-33" data-line-number="33"></a>
<a class="sourceLine" id="cb56-34" data-line-number="34">    <span class="co"># rendering plot function for each panel</span></a>
<a class="sourceLine" id="cb56-35" data-line-number="35">    render_outputs &lt;-<span class="st"> </span><span class="cf">function</span>(id) {</a>
<a class="sourceLine" id="cb56-36" data-line-number="36">        output[[<span class="kw">paste0</span>(<span class="st">&quot;plot_&quot;</span>, id)]] &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb56-37" data-line-number="37">            msleep <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-38" data-line-number="38"><span class="st">                </span><span class="kw">filter</span>(vore <span class="op">==</span><span class="st"> </span><span class="kw">tolower</span>(stringr<span class="op">::</span><span class="kw">str_remove</span>(id, <span class="st">&quot;vore&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-39" data-line-number="39"><span class="st">                </span><span class="kw">ggplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb56-40" data-line-number="40"><span class="st">                </span><span class="kw">aes_string</span>(<span class="dt">x =</span> input<span class="op">$</span>x, <span class="dt">y =</span> input<span class="op">$</span>y) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-41" data-line-number="41"><span class="st">                </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb56-42" data-line-number="42">            )</a>
<a class="sourceLine" id="cb56-43" data-line-number="43">        })</a>
<a class="sourceLine" id="cb56-44" data-line-number="44">    }</a>
<a class="sourceLine" id="cb56-45" data-line-number="45"></a>
<a class="sourceLine" id="cb56-46" data-line-number="46">    <span class="co"># apply to the species vector using map</span></a>
<a class="sourceLine" id="cb56-47" data-line-number="47">    purrr<span class="op">::</span><span class="kw">map</span>(species, render_outputs)</a>
<a class="sourceLine" id="cb56-48" data-line-number="48">}</a>
<a class="sourceLine" id="cb56-49" data-line-number="49"></a>
<a class="sourceLine" id="cb56-50" data-line-number="50"><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-14.4.2" class="section level3 unnumbered">
<h3>Exercise 14.4.2</h3>
<p>Continue working with the same app from the previous exercise, and further remove redundancy in the code by modularizing how subsets and plots are created.</p>
<div class="solution">
<h4 id="solution-41" class="unnumbered"><span id="unlabeled-div-42" class="solution"><em>Solution</em>. </span>Solution</h4>
<p>TODO: I’m unsure what to do with this one since we haven’t yet introduced modules?</p>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-14.4.3" class="section level3 unnumbered">
<h3>Exercise 14.4.3</h3>
<p>Suppose you have an app that is slow to launch when a user visits it. Can
modularizing your app code help solve this problem? Explain your reasoning.</p>
<div class="solution">
<h4 id="solution-42" class="unnumbered"><span id="unlabeled-div-43" class="solution"><em>Solution</em>. </span>Solution</h4>
<p>No, we’re just packaging our code into neater functions - this doesn’t change or optimize what is loaded when the app is launched. In fact, modularizing might even make your application slower in some cases.</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="general-guidelines.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modules.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/marlycormar/mastering_shiny_book_solutions/edit/master/scaling-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
