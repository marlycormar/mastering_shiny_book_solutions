<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Bookmarking | Mastering Shiny Solutions</title>
  <meta name="description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Bookmarking | Mastering Shiny Solutions" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  <meta name="github-repo" content="marlycormar/mastering_shiny_book_solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Bookmarking | Mastering Shiny Solutions" />
  
  <meta name="twitter:description" content="A solutions manual to Hadley Wickham’s Mastering Shiny." />
  

<meta name="author" content="Maya Gans and Marly Gotti" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dynamic-ui.html"/>
<link rel="next" href="tidy-evaluation.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102068953-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102068953-3');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mastering Shiny Solutions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-boxes"><i class="fa fa-check"></i>Note Boxes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html"><i class="fa fa-check"></i><b>2</b> Your First Shiny App</a><ul>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.1"><i class="fa fa-check"></i>Exercise 2.8.1</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.2"><i class="fa fa-check"></i>Exercise 2.8.2</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.3"><i class="fa fa-check"></i>Exercise 2.8.3</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.4"><i class="fa fa-check"></i>Exercise 2.8.4</a></li>
<li class="chapter" data-level="" data-path="your-first-shiny-app.html"><a href="your-first-shiny-app.html#exercise-2.8.5"><i class="fa fa-check"></i>Exercise 2.8.5</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-ui.html"><a href="basic-ui.html"><i class="fa fa-check"></i><b>3</b> Basic UI</a><ul>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.1"><i class="fa fa-check"></i>Exercise 3.2.8.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.2"><i class="fa fa-check"></i>Exercise 3.2.8.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.3"><i class="fa fa-check"></i>Exercise 3.2.8.3</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.4"><i class="fa fa-check"></i>Exercise 3.2.8.4</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.2.8.5"><i class="fa fa-check"></i>Exercise 3.2.8.5</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.1"><i class="fa fa-check"></i>Exercise 3.3.5.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.3.5.2"><i class="fa fa-check"></i>Exercise 3.3.5.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.1"><i class="fa fa-check"></i>Exercise 3.4.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.2"><i class="fa fa-check"></i>Exercise 3.4.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-ui.html"><a href="basic-ui.html#exercise-3.4.6.3"><i class="fa fa-check"></i>Exercise 3.4.6.3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="basic-reactivity.html"><a href="basic-reactivity.html"><i class="fa fa-check"></i><b>4</b> Basic Reactivity</a><ul>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.1"><i class="fa fa-check"></i>Exercise 4.3.6.1</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.3.6.2"><i class="fa fa-check"></i>Exercise 4.3.6.2</a></li>
<li class="chapter" data-level="" data-path="basic-reactivity.html"><a href="basic-reactivity.html#exercise-4.4.6.1"><i class="fa fa-check"></i>Exercise 4.4.6.1</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html"><i class="fa fa-check"></i><b>5</b> Case Study: ER Injuries</a><ul>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.1"><i class="fa fa-check"></i>Exercise 5.8.1</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.2"><i class="fa fa-check"></i>Exercise 5.8.2</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.3"><i class="fa fa-check"></i>Exercise 5.8.3</a></li>
<li class="chapter" data-level="" data-path="case-study-er-injuries.html"><a href="case-study-er-injuries.html#exercise-5.8.4"><i class="fa fa-check"></i>Exercise 5.8.4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>6</b> Workflow</a></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a><ul>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.1"><i class="fa fa-check"></i>Exercise 7.6.1</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.2"><i class="fa fa-check"></i>Exercise 7.6.2</a></li>
<li class="chapter" data-level="" data-path="graphics.html"><a href="graphics.html#exercise-7.6.3"><i class="fa fa-check"></i>Exercise 7.6.3</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="user-feedback.html"><a href="user-feedback.html"><i class="fa fa-check"></i><b>8</b> User Feedback</a></li>
<li class="chapter" data-level="9" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html"><i class="fa fa-check"></i><b>9</b> Uploads and Downloads</a><ul>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.1"><i class="fa fa-check"></i>Exercise 9.4.1</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.2"><i class="fa fa-check"></i>Exercise 9.4.2</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.3"><i class="fa fa-check"></i>Exercise 9.4.3</a></li>
<li class="chapter" data-level="" data-path="uploads-and-downloads.html"><a href="uploads-and-downloads.html#exercise-9.4.4"><i class="fa fa-check"></i>Exercise 9.4.4</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-ui.html"><a href="dynamic-ui.html"><i class="fa fa-check"></i><b>10</b> Dynamic UI</a><ul>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.1"><i class="fa fa-check"></i>Exercise 10.1.5.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.2"><i class="fa fa-check"></i>Exercise 10.1.5.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.3"><i class="fa fa-check"></i>Exercise 10.1.5.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.4"><i class="fa fa-check"></i>Exercise 10.1.5.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.1.5.5"><i class="fa fa-check"></i>Exercise 10.1.5.5</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.1"><i class="fa fa-check"></i>Exercise 10.2.3.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.2"><i class="fa fa-check"></i>Exercise 10.2.3.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.2.3.3"><i class="fa fa-check"></i>Exercise 10.2.3.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.1"><i class="fa fa-check"></i>Exercise 10.3.4.1</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.2"><i class="fa fa-check"></i>Exercise 10.3.4.2</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.3"><i class="fa fa-check"></i>Exercise 10.3.4.3</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.4"><i class="fa fa-check"></i>Exercise 10.3.4.4</a></li>
<li class="chapter" data-level="" data-path="dynamic-ui.html"><a href="dynamic-ui.html#exercise-10.3.4.5"><i class="fa fa-check"></i>Exercise 10.3.4.5</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="bookmarking.html"><a href="bookmarking.html"><i class="fa fa-check"></i><b>11</b> Bookmarking</a><ul>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.1"><i class="fa fa-check"></i>Exercise 11.3.1</a></li>
<li class="chapter" data-level="" data-path="bookmarking.html"><a href="bookmarking.html#exercise-11.3.2"><i class="fa fa-check"></i>Exercise 11.3.2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-evaluation.html"><a href="tidy-evaluation.html"><i class="fa fa-check"></i><b>12</b> Tidy Evaluation</a></li>
<li class="chapter" data-level="13" data-path="general-guidelines.html"><a href="general-guidelines.html"><i class="fa fa-check"></i><b>13</b> General Guidelines</a></li>
<li class="chapter" data-level="14" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>14</b> Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.1"><i class="fa fa-check"></i>Exercise 14.4.1</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.2"><i class="fa fa-check"></i>Exercise 14.4.2</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-14.4.3"><i class="fa fa-check"></i>Exercise 14.4.3</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>15</b> Modules</a><ul>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.1"><i class="fa fa-check"></i>Exercise 15.6.1</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.2"><i class="fa fa-check"></i>Exercise 15.6.2</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.3"><i class="fa fa-check"></i>Exercise 15.6.3</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.4"><i class="fa fa-check"></i>Exercise 15.6.4</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.5"><i class="fa fa-check"></i>Exercise 15.6.5</a></li>
<li class="chapter" data-level="" data-path="modules.html"><a href="modules.html#exercise-15.6.6"><i class="fa fa-check"></i>Exercise 15.6.6</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>16</b> Packages</a></li>
<li class="chapter" data-level="17" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>17</b> Testing</a></li>
<li class="chapter" data-level="18" data-path="safety.html"><a href="safety.html"><i class="fa fa-check"></i><b>18</b> Safety</a></li>
<li class="chapter" data-level="19" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>19</b> Performance</a></li>
<li class="chapter" data-level="20" data-path="why-reactivity.html"><a href="why-reactivity.html"><i class="fa fa-check"></i><b>20</b> Why reactivity?</a></li>
<li class="chapter" data-level="21" data-path="dependency-tracking.html"><a href="dependency-tracking.html"><i class="fa fa-check"></i><b>21</b> Dependency Tracking</a></li>
<li class="chapter" data-level="22" data-path="scoping.html"><a href="scoping.html"><i class="fa fa-check"></i><b>22</b> Scoping</a></li>
<li class="chapter" data-level="23" data-path="reactive-components.html"><a href="reactive-components.html"><i class="fa fa-check"></i><b>23</b> Reactive Components</a></li>
<li class="chapter" data-level="24" data-path="advanced-ui.html"><a href="advanced-ui.html"><i class="fa fa-check"></i><b>24</b> Advanced UI</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mastering Shiny Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bookmarking" class="section level1">
<h1><span class="header-section-number">Chapter 11</span> Bookmarking</h1>
<div class="TODO">
This chapter is in development...
</div>
<div id="exercise-11.3.1" class="section level3 unnumbered">
<h3>Exercise 11.3.1</h3>
<p>Generate app for visualising the results of <a href="https://ambient.data-imaginist.com/reference/noise_simplex.html">noise::ambient_simplex()</a>. Your app should allow the user to control the frequency, fractal, lacunarity, and gain, and be bookmarkable. How can you ensure the image looks exactly the same when reloaded from the bookmark? (Think about what the seed argument implies).</p>
<div class="solution">
<h4 id="solution-38" class="unnumbered"><span id="unlabeled-div-39" class="solution"><em>Solution</em>. </span>Solution</h4>
<p>For this example, we’ll use the bookmarking by setting <code>enableBookmarking = &quot;url&quot;</code> within the <code>shinyApp</code> function. In order to ensure the simulation is the same each time we re-render the bookmark we’ll create a grid to use for points then set the seed to <code>42</code> to ensure the same image is rendered when the bookmark is loaded.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="kw">library</span>(ambient)</a>
<a class="sourceLine" id="cb53-3" data-line-number="3"></a>
<a class="sourceLine" id="cb53-4" data-line-number="4">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb53-5" data-line-number="5">    <span class="kw">sidebarLayout</span>(</a>
<a class="sourceLine" id="cb53-6" data-line-number="6">        <span class="kw">sidebarPanel</span>(</a>
<a class="sourceLine" id="cb53-7" data-line-number="7">            <span class="kw">sliderInput</span>(<span class="st">&quot;frequency&quot;</span>, <span class="st">&quot;Frequency&quot;</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>, <span class="dt">value =</span> <span class="fl">0.01</span>),</a>
<a class="sourceLine" id="cb53-8" data-line-number="8">            <span class="kw">selectInput</span>(<span class="st">&quot;fractal&quot;</span>, <span class="st">&quot;Fractal&quot;</span>, <span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">&quot;none&quot;</span>, <span class="st">&quot;fbm&quot;</span>, <span class="st">&quot;billow&quot;</span>, <span class="st">&quot;rigid-multi&quot;</span>)),</a>
<a class="sourceLine" id="cb53-9" data-line-number="9">            <span class="kw">sliderInput</span>(<span class="st">&quot;gain&quot;</span>, <span class="st">&quot;Gain&quot;</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>, <span class="dt">value =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb53-10" data-line-number="10">        ),</a>
<a class="sourceLine" id="cb53-11" data-line-number="11">        <span class="kw">mainPanel</span>(</a>
<a class="sourceLine" id="cb53-12" data-line-number="12">           <span class="kw">plotOutput</span>(<span class="st">&quot;result&quot;</span>)</a>
<a class="sourceLine" id="cb53-13" data-line-number="13">        )</a>
<a class="sourceLine" id="cb53-14" data-line-number="14">    )</a>
<a class="sourceLine" id="cb53-15" data-line-number="15">)</a>
<a class="sourceLine" id="cb53-16" data-line-number="16"></a>
<a class="sourceLine" id="cb53-17" data-line-number="17"></a>
<a class="sourceLine" id="cb53-18" data-line-number="18">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb53-19" data-line-number="19"></a>
<a class="sourceLine" id="cb53-20" data-line-number="20">    grid &lt;-<span class="st"> </span><span class="kw">long_grid</span>(<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">length.out =</span> <span class="dv">1000</span>), <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">length.out =</span> <span class="dv">1000</span>))</a>
<a class="sourceLine" id="cb53-21" data-line-number="21"></a>
<a class="sourceLine" id="cb53-22" data-line-number="22">    noise &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb53-23" data-line-number="23">        ambient<span class="op">::</span><span class="kw">gen_simplex</span>(</a>
<a class="sourceLine" id="cb53-24" data-line-number="24">            <span class="dt">x =</span> grid<span class="op">$</span>x,</a>
<a class="sourceLine" id="cb53-25" data-line-number="25">            <span class="dt">y =</span> grid<span class="op">$</span>y,</a>
<a class="sourceLine" id="cb53-26" data-line-number="26">            <span class="dt">seed =</span> <span class="dv">42</span>,</a>
<a class="sourceLine" id="cb53-27" data-line-number="27">            <span class="dt">frequency =</span> input<span class="op">$</span>frequency,</a>
<a class="sourceLine" id="cb53-28" data-line-number="28">            <span class="dt">fractal =</span> input<span class="op">$</span>fractal,</a>
<a class="sourceLine" id="cb53-29" data-line-number="29">            <span class="dt">gain =</span> input<span class="op">$</span>gain</a>
<a class="sourceLine" id="cb53-30" data-line-number="30">        )</a>
<a class="sourceLine" id="cb53-31" data-line-number="31">    })</a>
<a class="sourceLine" id="cb53-32" data-line-number="32"></a>
<a class="sourceLine" id="cb53-33" data-line-number="33">    output<span class="op">$</span>result &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb53-34" data-line-number="34">        <span class="kw">plot</span>(grid, <span class="kw">noise</span>())</a>
<a class="sourceLine" id="cb53-35" data-line-number="35">    })</a>
<a class="sourceLine" id="cb53-36" data-line-number="36"></a>
<a class="sourceLine" id="cb53-37" data-line-number="37">    <span class="kw">observe</span>({</a>
<a class="sourceLine" id="cb53-38" data-line-number="38">        <span class="kw">reactiveValuesToList</span>(input)</a>
<a class="sourceLine" id="cb53-39" data-line-number="39">        session<span class="op">$</span><span class="kw">doBookmark</span>()</a>
<a class="sourceLine" id="cb53-40" data-line-number="40">    })</a>
<a class="sourceLine" id="cb53-41" data-line-number="41">    <span class="kw">onBookmarked</span>(updateQueryString)</a>
<a class="sourceLine" id="cb53-42" data-line-number="42">}</a>
<a class="sourceLine" id="cb53-43" data-line-number="43"></a>
<a class="sourceLine" id="cb53-44" data-line-number="44"><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server, <span class="dt">enableBookmarking =</span> <span class="st">&quot;url&quot;</span>)</a></code></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
<!---------------------------------------------------------------------------->
</div>
<div id="exercise-11.3.2" class="section level3 unnumbered">
<h3>Exercise 11.3.2</h3>
<p>Make a simple app that lets you upload a csv file and then bookmark it. Upload a few files and then look in shiny_bookmarks. How do the files correspond to the bookmarks? (Hint: you can use readRDS() to look inside the cache files that Shiny is generating).</p>
<div class="solution">
<h4 id="solution-39" class="unnumbered"><span id="unlabeled-div-40" class="solution"><em>Solution</em>. </span>Solution</h4>
<p>By setting the <code>state$values$data</code> equal to the <code>data</code> reactive, we can store the contents of the uploaded <code>csv</code>. Looking in the <code>shiny_bookmarks</code> folder we see an <code>input.rds</code> which has the same 4 arguments as <code>input$file</code>:</p>
<ol style="list-style-type: decimal">
<li><code>name</code></li>
<li><code>size</code></li>
<li><code>type</code></li>
<li><code>datapath</code></li>
</ol>
<p>All of these except the <code>datapath</code> are the same as when we upload the file; rather than the temporary location the file is saved to within the shiny session, the datapath becomes <code>0.csv</code>, a csv file created within the same folder are our <code>input.RDS</code>.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb54-2" data-line-number="2"></a>
<a class="sourceLine" id="cb54-3" data-line-number="3">ui &lt;-<span class="st"> </span><span class="cf">function</span>(request){</a>
<a class="sourceLine" id="cb54-4" data-line-number="4">    <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb54-5" data-line-number="5">        <span class="kw">sidebarLayout</span>(</a>
<a class="sourceLine" id="cb54-6" data-line-number="6">            <span class="kw">sidebarPanel</span>(</a>
<a class="sourceLine" id="cb54-7" data-line-number="7">                <span class="kw">bookmarkButton</span>(),</a>
<a class="sourceLine" id="cb54-8" data-line-number="8">                <span class="kw">fileInput</span>(<span class="st">&quot;file&quot;</span>, <span class="st">&quot;Choose CSV File&quot;</span>, <span class="dt">multiple =</span> <span class="ot">TRUE</span>,<span class="dt">accept =</span> <span class="st">&quot;.csv&quot;</span>)</a>
<a class="sourceLine" id="cb54-9" data-line-number="9">                ),</a>
<a class="sourceLine" id="cb54-10" data-line-number="10">            <span class="kw">mainPanel</span>(</a>
<a class="sourceLine" id="cb54-11" data-line-number="11">                <span class="kw">tableOutput</span>(<span class="st">&quot;contents&quot;</span>)</a>
<a class="sourceLine" id="cb54-12" data-line-number="12">            )</a>
<a class="sourceLine" id="cb54-13" data-line-number="13">        )</a>
<a class="sourceLine" id="cb54-14" data-line-number="14">    )</a>
<a class="sourceLine" id="cb54-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb54-16" data-line-number="16"></a>
<a class="sourceLine" id="cb54-17" data-line-number="17"></a>
<a class="sourceLine" id="cb54-18" data-line-number="18">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb54-19" data-line-number="19"></a>
<a class="sourceLine" id="cb54-20" data-line-number="20">    <span class="co"># create reactive of input file</span></a>
<a class="sourceLine" id="cb54-21" data-line-number="21">    data &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb54-22" data-line-number="22">        <span class="kw">req</span>(input<span class="op">$</span>file)</a>
<a class="sourceLine" id="cb54-23" data-line-number="23">        <span class="kw">read.csv</span>(input<span class="op">$</span>file<span class="op">$</span>datapath)</a>
<a class="sourceLine" id="cb54-24" data-line-number="24">    })</a>
<a class="sourceLine" id="cb54-25" data-line-number="25"></a>
<a class="sourceLine" id="cb54-26" data-line-number="26">    <span class="co"># display head</span></a>
<a class="sourceLine" id="cb54-27" data-line-number="27">    output<span class="op">$</span>contents &lt;-<span class="st"> </span><span class="kw">renderTable</span>( <span class="kw">head</span>(<span class="kw">data</span>()) )</a>
<a class="sourceLine" id="cb54-28" data-line-number="28"></a>
<a class="sourceLine" id="cb54-29" data-line-number="29">    <span class="co"># set the state to the df reactive</span></a>
<a class="sourceLine" id="cb54-30" data-line-number="30">    <span class="kw">onBookmark</span>(<span class="cf">function</span>(state){</a>
<a class="sourceLine" id="cb54-31" data-line-number="31">        state<span class="op">$</span>values<span class="op">$</span>data &lt;-<span class="st"> </span><span class="kw">data</span>()</a>
<a class="sourceLine" id="cb54-32" data-line-number="32">    })</a>
<a class="sourceLine" id="cb54-33" data-line-number="33"></a>
<a class="sourceLine" id="cb54-34" data-line-number="34">    <span class="co"># on restore set df to the state</span></a>
<a class="sourceLine" id="cb54-35" data-line-number="35">    <span class="kw">onRestore</span>(<span class="cf">function</span>(state){</a>
<a class="sourceLine" id="cb54-36" data-line-number="36">        data &lt;-<span class="st"> </span><span class="kw">reactive</span>(state<span class="op">$</span>values<span class="op">$</span>data)</a>
<a class="sourceLine" id="cb54-37" data-line-number="37">    })</a>
<a class="sourceLine" id="cb54-38" data-line-number="38">    <span class="kw">enableBookmarking</span>(<span class="dt">store=</span><span class="st">&quot;server&quot;</span>)</a>
<a class="sourceLine" id="cb54-39" data-line-number="39">}</a>
<a class="sourceLine" id="cb54-40" data-line-number="40"></a>
<a class="sourceLine" id="cb54-41" data-line-number="41"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dynamic-ui.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-evaluation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/marlycormar/mastering_shiny_book_solutions/edit/master/action-bookmark.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
